1.11 — 开发第一个程序  
=====================================  

[*作者：Alex*](https://www.learncpp.com/author/Alex/ "查看 Alex 的所有文章")  
2019年2月1日 上午10:11（PST）  
2024年3月12日  

前置课程已介绍大量我们将应用于每个程序的术语和概念。本章将通过整合这些知识来创建第一个简单程序。  

双倍数值程序  
----------------  

首先创建要求用户输入整数，计算其双倍值并输出的程序。预期输出如下（假设输入4）：  

```
输入整数：4  
双倍数值为：8  
```  

如何实现？分步进行。  

最佳实践  
----------------  

新程序员常试图一次性编写完整程序，面对大量错误时容易受挫。更好策略是逐步添加代码，确保编译通过并测试功能。确认无误后再继续后续开发。  

我们将采用此策略。请按步骤在编辑器中手动输入（勿复制粘贴）每个程序，编译并运行。  

步骤1：创建新控制台项目。  

步骤2：基础框架搭建。所有C++程序必须包含main()函数：  

```cpp
int main()
{
	return 0;
}
```  

步骤3：包含iostream头文件以使用std::cout（标准输出）和std::cin（标准输入）：  

```cpp
#include <iostream>

int main()
{
	return 0;
}
```  

步骤4：提示用户输入：  

```cpp
#include <iostream>

int main()
{
	std::cout << "输入整数：";
	return 0;
}
```  

此时程序输出：  

```
输入整数：
```  

随后终止。  

步骤5：通过std::cin和`operator>>`获取输入，定义存储变量：  

```cpp
#include <iostream>

int main() // 注意：此程序某处存在错误
{
	std::cout << "输入整数：";
	
	int num{ };        // 定义整型变量num
	std::cin << num;   // 获取用户输入（错误用法）
	
	return 0;
}
```  

编译时出现错误（Visual Studio 2017示例）：  

```
错误 C2678：二元运算符'<<'：未找到接受左操作数类型为‘std::istream’的运算符
```  

错误分析：  
1. 错误位于新增代码（7-8行）  
2. std::cin应使用`>>`运算符而非`<<`  

修正代码：  

```cpp
#include <iostream>

int main()
{
	std::cout << "输入整数：";
	
	int num{ };
	std::cin >> num;  // 正确使用>>运算符
	
	return 0;
}
```  

测试输入4，程序正常接收输入。  

步骤6：数值计算与输出。三种实现方案：  

方案一（不推荐）：  

```cpp
num = num * 2;                // 修改原始值
std::cout << "双倍数值为：" << num << '\n';
```  
缺点：覆盖原始输入，不利后续扩展。  

方案二（较好）：  

```cpp
int doublenum{ num * 2 };     // 定义新变量
std::cout << "双倍数值为：" << doublenum << '\n';
```  
缺点：创建仅使用一次的变量。  

方案三（推荐）：  

```cpp
std::cout << "双倍数值为：" << num * 2 << '\n';  // 直接计算输出
```  
优点：保留原始值，代码简洁。  

完整参考方案：  

```cpp
#include <iostream>

int main()
{
	std::cout << "输入整数：";
	
	int num{ };
	std::cin >> num;
	
	std::cout << "双倍数值为：" << num * 2 << '\n';
	
	return 0;
}
```  

编程思考  
----------------  

初级目标：使程序运行。但优秀代码需持续优化：  
- 移除调试代码  
- 添加注释  
- 错误处理  
- 代码格式化  
- 遵循最佳实践  

代码优化应注重可维护性而非过早性能优化。完美代码需迭代改进。  

学习建议  
----------------  

无需死记硬背C++规则，重点理解可能性。实际编程时可通过参考文档回忆具体实现。  

测验  
----------------  

问题1  
修改参考方案，实现以下输出（输入4时）：  

```
输入整数：4  
4的双倍是：8  
4的三倍是：12  
```  

解答：  

```cpp
#include <iostream>

int main()
{
	std::cout << "输入整数：";
	
	int num{ };
	std::cin >> num;
	
	std::cout << num << "的双倍是：" << num * 2 << '\n';
	std::cout << num << "的三倍是：" << num * 3 << '\n';
	
	return 0;
}
```  

[下一课 1.x — 第1章总结与测验](Chapter-1/lesson1.x-chapter-1-summary-and-quiz.md)  
[返回主页](/)  
[上一课 1.10 — 表达式简介](Chapter-1/lesson1.10-introduction-to-expressions.md)