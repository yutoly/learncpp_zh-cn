4.7 — 科学记数法简介  
==========================================

[*作者：Alex*](https://www.learncpp.com/author/Alex/ "查看 Alex 的所有文章")  
2025年1月29日（首次发布于2019年4月23日）  

在深入下一主题前，我们将暂时讨论科学记数法（scientific notation）。  

**科学记数法**是书写冗长数字的简洁方式。尽管初看可能陌生，但理解科学记数法将帮助您理解浮点数（floating point numbers）的运作原理，更重要的是理解其局限性。  

科学记数法的通用形式为：*有效数（significand）* x 10*指数（exponent）*。例如在科学记数法`1.2 x 10⁴`中，`1.2`是有效数，`4`是指数。由于10⁴等于10,000，因此1.2 x 10⁴等于12,000。  

按照惯例，科学记数法的有效数部分在小数点前只保留一位数字。  

以地球质量为例。十进制记数法下写作`5972200000000000000000000 kg`。这个超大数字（甚至无法存入8字节整数）不仅难以阅读（需数清19还是20个零），即便使用分隔符（5,972,200,000,000,000,000,000,000）仍然不便。  

用科学记数法可简写为`5.9722 x 10²⁴ kg`，更易阅读。科学记数法还能通过比较指数来快速判断两个极大/极小数的量级。  

由于C++中难以输入/显示指数，我们用字母'e'（或'E'）表示"乘以10的幂次"。例如`1.2 x 10⁴`写作`1.2e4`，`5.9722 x 10²⁴`写作`5.9722e24`。  

小于1的数可用负指数。`5e-2`等价于`5 * 10⁻²`，即`5 / 10²`或`0.05`。电子质量`9.1093837e-31 kg`即采用此形式。  

> **Linux用户注意**  
> 若使用Arch Linux系统且`5 * 10⁻²`的负号无法显示，可能需要安装支持特殊字符的字体。详见[Reddit讨论](https://www.reddit.com/r/archlinux/comments/1af46vq/some_unicode_characters_not_rendering_properly/)。  

有效数字  
----------------  

假设您需要数学常数π的值却忘记了。两人分别告诉您π≈3.14和π≈3.14159。两者都"正确"，但后者显然更精确。  

> **关键洞察**  
> 科学记数法中，'e'前的有效数部分包含的**有效数字（significant digits/significant figures）**越多，数值精度越高。  

例如：  
- `3.14e0`包含3个有效数字  
- `3.14159e0`包含6个有效数字  

十进制转科学记数法步骤  
----------------  
1. 初始指数为0  
2. 若数字无显式小数点（如`123`），默认在末尾（即`123.`）  
3. 左右移动小数点使左侧仅保留一个非零数字：  
   - 左移1位，指数+1  
   - 右移1位，指数-1  
4. 去除前导零（有效数左侧）  
5. 仅当原数无小数点时去除末尾零（默认视为无效）。若已知末尾零有效则保留  

转换示例：  
```
初始值：600.410
左移2位：6.00410e2
无前导零：6.00410e2
保留末尾零：6.00410e2（6位有效数字）
```

```
初始值：0.0078900
右移3位：0007.8900e-3
去除前导零：7.8900e-3
保留末尾零：7.8900e-3（5位有效数字）
```

```
初始值：42030（未知末尾零有效性）
左移4位：4.2030e4
去除前导零：4.2030e4
去除末尾零：4.203e4（4位有效数字）
```

```
初始值：42030（已知末尾零有效）
左移4位：4.2030e4
保留末尾零：4.2030e4（5位有效数字）
```

末尾零处理  
----------------  
假设两个实验室助理称量苹果：  
- 87.0克 → 有效数`8.70e1`（3位有效数字，可信范围86.95-87.049克）  
- 87.000克 → 有效数`8.7000e1`（5位有效数字，可信范围86.99950-87.00049克）  

对于无小数点的整数，默认末尾零无效：  
- 2100 → `2.1e3`（假设末尾零无效）  

若已知末尾零有效：  
- 2100 → `2.100e3`（末尾零有效）  

> **提示**  
> 显式末尾小数点表示末尾零有效：  
> - 2100\. → `2.100e3`  

科学记数法始终明确有效数字位数。注意，C++存储`87.0`和`87.000`时仅保留值`87`，无法追溯原始精度。  

测验  
----------------  
**问题1**  
将下列数字转为科学记数法（用e表示指数）并确定有效数字位数：  

a) 34.50  
<details><summary>答案</summary>3.450e1（4位有效数字）</details>  

b) 0.004000  
<details><summary>答案</summary>4.000e-3（4位有效数字）</details>  

c) 123.005  
<details><summary>答案</summary>1.23005e2（6位有效数字）</details>  

d) 146000  
<details><summary>答案</summary>1.46e5（3位有效数字，末尾零默认无效）</details>  

e) 146000.001  
<details><summary>答案</summary>1.46000001e5（9位有效数字）</details>  

f) 0.0000000008  
<details><summary>答案</summary>8e-10（1位有效数字）</details>  

g) 34500.0  
<details><summary>答案</summary>3.45000e4（6位有效数字）</details>  

h) 146000（已知末尾零有效）  
<details><summary>答案</summary>1.46000e5（6位有效数字）</details>  

[下一课 4.8 浮点数](Chapter-4/lesson4.8-floating-point-numbers.md)  
[返回主页](/)  
[上一课 4.6 固定宽度整数与size_t](Chapter-4/lesson4.6-fixed-width-integers-and-size-t.md)