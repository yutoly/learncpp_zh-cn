2.6 — 函数的优势及高效使用方法  
================================================

[*作者：Alex*](https://www.learncpp.com/author/Alex/ "查看 Alex 的所有文章")  
2015年8月4日 下午4:38（首次发布）  
2023年1月25日（最后更新）  

在了解函数的基本概念后，本节将深入探讨函数的应用价值及其高效使用策略。  

为何使用函数？  
----------------  

初学者常质疑："为何不将所有代码置于*main*函数中？"对于简单程序确实可行，但函数在复杂或大型程序中展现出诸多优势：  

* **组织性** —— 随着程序复杂度提升，将所有代码置于main()函数会导致结构混乱。函数如同独立子程序，允许我们将复杂系统拆解为更小、更易管理的模块，降低整体复杂度。  
* **可重用性** —— 函数编写完成后可在程序中多次调用，避免代码重复（遵循"DRY"原则），减少复制粘贴引发的错误。函数还可跨程序复用，降低重复编写和测试成本。  
* **可测试性** —— 函数减少冗余代码量，简化测试范围。由于函数具备自包含性，通过验证后无需重复测试（除非修改实现），便于问题定位和预防。  
* **可扩展性** —— 扩展程序功能时，函数允许通过单点修改实现全局影响。  
* **抽象性** —— 使用函数只需了解其名称、输入、输出及位置，无需理解内部实现细节。这降低了对他人代码（包括标准库）的使用门槛。  

高效使用函数策略  
----------------  

新程序员常面临函数应用场景的判断难题，以下提供基础指导原则：  

* **重复代码封装** —— 同一组语句在程序中多次出现时应转换为函数。例如重复的用户输入模式或统一输出格式。  
* **明确输入输出** —— 具有明确输入输出（尤其复杂逻辑）的代码适合封装为函数。如排序算法（输入未排序列表，输出有序列表）或模拟六面骰子（后续可复用）。  
* **单一职责原则** —— 函数应专注于完成单一任务。  
* **重构（refactoring）** —— 当函数过长、复杂或难以理解时，应拆分为多个子函数。详见课程[3.10 — 问题预防策略](Chapter-3/lesson3.10-finding-issues-before-they-become-problems.md)。  

典型应用场景  
----------------  

C++学习过程中常涉及三个核心子任务：  
1. 用户输入读取  
2. 基于输入的计算  
3. 结果输出  

对于小型程序（如少于20行代码），可将这些任务置于main()函数。但较复杂程序（或出于练习目的）建议将每个任务独立为函数。  

常见误区：将计算与输出合并到同一函数。这违反"单一职责"原则。正确做法是让计算函数返回值，由调用者决定后续处理（如调用打印函数）。  

[下一课 2.7 — 前向声明与定义](Chapter-2/lesson2.7-forward-declarations.md)  
[返回主页](/)  
[上一课 2.5 — 局部作用域简介](Chapter-2/lesson2.5-introduction-to-local-scope.md)