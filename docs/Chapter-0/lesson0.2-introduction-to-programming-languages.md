0.2 — 程序与编程语言简介  
=========================================================

[*作者：Alex*](https://www.learncpp.com/author/Alex/ "查看 Alex 的所有文章")  
2025年3月20日（首次发布于2007年5月27日）  

现代计算机的运行速度令人惊叹，且仍在不断提升。然而计算机也存在显著限制：它们原生只能理解有限的指令集，且必须被明确告知每一步操作。  

**计算机程序（computer program）**是指导计算机按特定顺序执行操作的指令序列。计算机程序通常用**编程语言（programming language）**编写，这类语言专为向计算机传达指令而设计。现有众多不同编程语言，各自满足不同需求。编写程序的行为（及艺术）称为**编程（programming）**。后续课程将具体讲解如何用C++创建程序。  

当计算机执行程序中的指令时，我们称其正在**运行（running）**或**执行（executing）**该程序。计算机不会主动开始执行程序，通常需要用户**启动（launch）**（或运行/执行）程序，但程序也可能被其他程序触发运行。  

程序在计算机的**硬件（hardware）**上执行，即组成计算机的物理部件。典型计算设备的重要硬件包括：  
* CPU（中央处理器，常称计算机"大脑"），实际执行指令  
* 内存（memory），程序执行前加载至此  
* 交互设备（如显示器、触屏、键盘、鼠标），实现人机交互  
* 存储设备（如硬盘、固态硬盘、闪存），在关机后仍能保留信息（包括已安装程序）  

相较而言，**软件（software）**广义指系统中设计在硬件上执行的程序。  

在现代计算中，程序不仅与硬件交互，还常与系统其他软件（尤其是操作系统）交互。**平台（platform）**指由兼容的硬件和软件（操作系统、浏览器等）共同构成软件运行环境的组合。例如"PC"的俗称即指由Windows操作系统与x86系列CPU组成的平台。  

平台常为运行其上的程序提供实用服务。例如桌面应用可能请求操作系统分配内存块、创建文件或播放声音。运行中的程序无需了解这些服务如何实现。若程序使用平台提供的功能或服务，就会产生平台依赖性，未经修改无法在其他平台运行。能轻松移植到其他平台的程序称为**可移植（portable）**。修改程序使其适配不同平台的过程称为**移植（porting）**。  

了解程序概念后，我们探讨编程语言。这不仅是历史课，还将介绍后续课程中的重要术语。  

机器语言（Machine Language）  
----------------  

计算机CPU无法理解C++。CPU只能处理**机器语言（machine language）**或**机器码（machine code）**编写的指令。特定CPU能理解的所有机器语言指令集合称为**指令集（instruction set）**。  

示例机器语言指令：`10110000 01100001`。  

每个指令被CPU视为执行特定任务的命令，如"比较两数"或"将数字复制到某内存位置"。计算机发明初期，程序员必须直接编写机器语言程序，过程极其困难耗时。  

这些指令的组织与解释方式超出本系列教程范围，但需注意：  
1. 每条指令由0和1序列组成，每个0或1称为**二进制位（binary digit）**，简称**位（bit）**  
2. 不同CPU家族（如x86、Arm64）有各自的机器语言，互不兼容。为某CPU家族编写的机器语言程序无法在其他家族CPU运行！  

> **相关内容**  
> "CPU家族"正式名称为"指令集架构（instruction set architecture）"，简称ISA。维基百科列出不同CPU家族[列表](https://en.wikipedia.org/wiki/Comparison_of_instruction_set_architectures#Instruction_sets)。  

汇编语言（Assembly Languages）  
----------------  

机器语言指令（如`10110000 01100001`）对CPU理想，但人类难以理解。因程序（至少历史上）由人类编写维护，编程语言设计需考虑人类需求。  

**汇编语言（assembly language）**（简称汇编）本质上是更易读的机器语言。以下是与前例相同的x86汇编指令：`mov al, 0x61`。  

> **进阶阅读**  
> 该指令展示汇编比机器语言更易读的多个特性：  
> * 操作由短助记符标识（通常3-5字母）。`mov`显然代表"移动"，即数据复制操作  
> * 寄存器（CPU内置快速存储单元）通过名称访问。`al`是x86 CPU特定寄存器名  
> * 支持更便捷的数字格式（十进制如`97`，十六进制如`0x61`）  

可见汇编指令`mov al, 0x61`将十六进制数`0x61`复制到CPU寄存器`al`。  

由于CPU不理解汇编语言，汇编程序必须转换为机器语言才能执行。此转换由**汇编器（assembler）**完成。因每条汇编指令通常对应一条机器指令，转换过程较直接。  

不同CPU家族有各自的汇编语言（设计为对应机器语言），故存在多种汇编语言。虽然概念相似，但不同汇编语言支持不同指令、命名规范等。  

低级语言简介  
----------------  

机器语言和汇编语言属于**低级语言（low-level language）**，因这些语言与机器架构的抽象程度最低。换言之，编程语言本身专为其运行的指令集架构定制。  

低级语言存在显著缺点：  
* 不可移植：程序专为特定指令集编写，移植到其他架构通常困难  
* 需掌握架构细节：例如`mov al, 061h`需知`al`是当前平台的CPU寄存器  
* 难以理解：汇编指令虽可读，但推断代码功能仍困难，且简单任务需大量指令  
* 难写复杂程序：语言仅提供原始功能，需自行实现所有需求  

低级语言的主要优势是速度快。汇编至今仍用于性能关键代码段。  

高级语言（High-level Languages）简介  
----------------  

为克服上述缺点，开发了C、C++、Pascal等"高级"编程语言（后来出现Java、Javascript、Perl等）。  

前例指令在C/C++中为：`a = 97;`。  

类似汇编程序需汇编为机器语言，高级语言程序也需转换才能运行。主要转换方式有两种：编译与解释。  

C++程序通常被编译。**编译器（compiler）**是将某语言（通常高级语言）源代码转换为另一语言（通常低级语言）的程序。例如C++编译器将C++源码转为机器码。  

> **进阶阅读**  
> 多数C++编译器可生成汇编代码，便于查看编译器为代码段生成的具体指令。  

编译器输出的机器码可打包成可执行文件（含机器指令），分发后由操作系统直接运行。运行可执行文件无需安装编译器。  

早期编译器原始，生成的汇编/机器码效率低。但现代编译器已能生成高度优化的高效代码，某些情况下优于人工编写！  

编译过程简化图示：  
![编译示例](data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22521%22%20height=%22161%22%3E%3C/svg%3E)  

**解释器（interpreter）**则直接执行源代码指令，无需编译。解释器更灵活，但效率较低（每次运行都需解释），且运行环境必须安装解释器。  

解释过程简化图示：  
![解释示例](data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22721%22%20height=%2261%22%3E%3C/svg%3E)  

> **进阶阅读**  
> 编译器与解释器的优势对比可参考[此链接](https://stackoverflow.com/a/38491646)。  
> 编译程序的另一优势是分发时不需公开源代码，对知识产权保护至关重要。  

多数高级语言既可编译也可解释。传统上C、C++、Pascal等被编译，Perl、Javascript等脚本语言常被解释。Java等语言混合使用两种方式。  

高级语言的优点  
----------------  

高级语言因其提供高于底层架构的抽象级别得名。  

考虑指令`a = 97;`：它允许将值存储在内存某处，而无需知具体位置或CPU所需机器指令。实际上该指令无任何平台特性，编译器负责将其转为平台特定机器码。  

高级语言让程序员无需深入了解运行平台即可编写程序，显著提升可移植性。精心编写的C++程序可在所有配备C++编译器的平台编译！能在多平台运行的程序称为**跨平台（cross-platform）**。  

![可移植性示例](data:image/svg+xml,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22481%22%20height=%22261%22%3E%3C/svg%3E)  

> **高级读者注意**  
> 以下因素可能影响C++代码可移植性：  
> * 操作系统特定功能（如Windows API）  
> * 第三方库的平台限制  
> * 编译器特定扩展功能  
> * C++语言的"实现定义行为"（详见课程[1.6 — 未初始化变量与未定义行为](Chapter-1/lesson1.6-uninitialized-variables-and-undefined-behavior.md)）  

即使最初仅针对单一平台，成功应用常需移植到其他平台（如移动应用需适配iOS和Android）。未考虑可移植性将增加后期移植工作量。  

本教程将尽量避免平台专用代码，确保程序可在配备现代C++编译器的任何平台运行。  

高级语言其他优势：  
* 更易读写学习：指令更接近日常语言与数学表达。例如C++中`a = b * 2 + 5;`一行代码对应汇编需4-6条指令  
* 提供常用功能库：如内存分配、文本处理。例如单条指令即可在文本中搜索"abc"并返回结果  

术语说明  
----------------  

虽然C++技术上属高级语言，但较新语言（如脚本语言）提供更高抽象级别。因此C++有时被不准确地称为"低级语言"。  

> **作者提示**  
> 现代C++更应称为中阶语言，这突显其关键优势：可在不同抽象层级工作。开发者可选择底层操作获取性能优势，或高层操作提高便捷性。  

规则、最佳实践与警告  
----------------  

本教程将通过以下三类标注重点内容：  

**规则**  
必须遵守的语言要求，违反将导致程序故障。  

**最佳实践**  
推荐做法，因其符合惯例（惯用）或更优方案。  

**警告**  
禁止操作，因其导致意外结果。  

[下一课 0.3 — C/C++简介](Chapter-0/lesson0.3-introduction-to-cplusplus.md)  
[返回主页](/)  
[上一课 0.1 — 本教程简介](Chapter-0/lesson0.1-introduction-to-these-tutorials.md)