0.5 — 编译器、链接器与库简介  
==========================================================

[*Alex*](https://www.learncpp.com/author/Alex/ "查看 Alex 的所有文章")  
2025年2月23日（首次发布于2018年9月18日）  

承接前章课程[0.4 — C++开发简介](Chapter-0/lesson0.4-introduction-to-cpp-development.md)中的图表讨论：  
![软件开发流程](https://www.learncpp.com/images/CppTutorial/Chapter0/Development-min.png?ezimgfmt=ng%3Awebp%2Fngcb2%2Frs%3Adevice%2Frscb2-1)  

本节将详述步骤4-7。  

步骤4：编译源代码  
---------
要编译C++源代码文件，需要使用**C++编译器（C++ compiler）**。编译器将依次处理程序中的每个源文件（.cpp），执行两项关键任务：  

首先，编译器检查代码是否符合C++语言规则。若存在违规，将给出错误提示（含对应行号）以定位问题。编译过程将中止直至错误修复。  

其次，编译器将C++代码转换为机器语言指令。这些指令存储在**对象文件（object file）**中。该文件还包含后续步骤所需的其他数据（包括步骤5链接所需数据及步骤7调试数据）。  

对象文件通常命名为*name.o*或*name.obj*（*name*与源文件名相同）。例如程序若有3个.cpp文件，编译器将生成3个对象文件：  
![编译流程](https://www.learncpp.com/images/CppTutorial/Chapter0/CompileSource-min.png)  

C++编译器支持多种操作系统。我们将在后续课程讨论编译器的安装。  

步骤5：链接对象文件与库并生成目标输出文件  
--------
编译完成后，**链接器（linker）**开始工作。其职责是合并所有对象文件并生成目标输出文件（如可执行文件）。此过程称为**链接（linking）**。若链接失败，将生成错误信息并中止流程。  

链接器首先验证所有编译器生成的对象文件的有效性。  

其次，确保跨文件依赖正确解析。例如若在某.cpp文件中定义内容，并在另一文件中使用，链接器将建立两者关联。若无法定位定义，将产生链接错误。  

第三，链接器通常需要链接一个或多个**库文件（library files）**——这些是预编译代码的集合，可供其他程序复用。  

最后，链接器输出目标文件。通常为可执行文件（也可根据项目设置输出库文件）。  
![链接流程](https://www.learncpp.com/images/CppTutorial/Chapter0/LinkingObjects-min.png)  

**标准库（Standard library）**  
C++自带**C++标准库（C++ Standard Library）**，提供丰富的功能模块。其中最常用的是输入/输出库（常称"iostream"），包含屏幕输出与键盘输入功能。  

几乎所有C++程序都会使用标准库，因此标准库默认被链接。多数链接器已配置自动链接标准库。  

**第三方库（third party libraries）**  
可选链接由独立实体开发的**第三方库**。例如要实现音频播放功能，标准库并不包含相关模块。此时可寻找现成的音频处理库来简化开发。  

附录中将讨论如何链接（及创建）库文件。  

**构建（Building）**  
由于涉及多个步骤，**构建（building）**常指将源代码转换为可执行文件的完整过程。构建生成的特定可执行文件有时称为**构建产物（build）**。  

**进阶阅读**  
复杂项目常使用构建自动化工具（如**make**或**build2**）来自动化构建与测试流程。虽然这些工具功能强大，但因其非C++核心语言组成部分，本教程暂不涉及。  

步骤6 & 7：测试与调试  
--------
这是最有趣的部分！您现在可以运行程序并观察其行为。  

**测试（Testing）**是评估软件是否符合预期的过程。基础测试通常涉及尝试不同输入组合以验证各种情况下的正确性。  

若程序未达预期，则需进行**调试（debugging）**——即查找修复错误的过程。后续章节将深入讨论测试与调试技术。  

**集成开发环境（Integrated development environments，IDEs）**  
注意步骤3、4、5、7均需安装软件（编辑器、编译器、链接器、调试器）。虽然可分别使用独立工具，但**集成开发环境（IDE）**将这些功能整合为统一套件。下节将讨论IDE的安装与使用。  

[下一课 0.6 安装集成开发环境](Chapter-0/lesson0.6-installing-an-integrated-development-environment-ide.md)  
[返回主页](/)  
[上一课 0.4 C++开发简介](Chapter-0/lesson0.4-introduction-to-cpp-development.md)